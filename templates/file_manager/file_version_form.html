{% extends "file_manager/base_files.html" %}

{% block title %}üîÑ –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è{% endblock %}
{% block page_name %}–°–æ–∑–¥–∞—Ç—å –≤–µ—Ä—Å–∏—é{% endblock %}
{% block breadcrumb_extra %}
<a class="breadcrumb-item" href="{% url 'file_manager:file_list' %}">–§–∞–π–ª—ã</a>
<a class="breadcrumb-item" href="{% url 'file_manager:file_detail' file.id %}">{{ file.title }}</a>
{% endblock %}

{% block files_content %}
<div class="row">
    <div class="col-md-8">
        <div class="page-title">
            <h1><i class="bi bi-arrow-repeat"></i> –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é</h1>
            <p>–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è: <strong>{{ file.version }}</strong></p>
        </div>
        
        <div class="card">
            <div class="card-body">
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    
                    <div class="mb-3">
                        <label for="{{ form.version_file.id_for_label }}" class="form-label">–ù–æ–≤—ã–π —Ñ–∞–π–ª *</label>
                        {{ form.version_file }}
                        {% if form.version_file.errors %}
                        <div class="text-danger mt-1">{{ form.version_file.errors }}</div>
                        {% endif %}
                        <small class="form-text text-muted">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Ñ–∞–π–ª–∞</small>
                    </div>
                    
                    <div class="mb-3">
                        <label for="{{ form.change_description.id_for_label }}" class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π</label>
                        {{ form.change_description }}
                        {% if form.change_description.errors %}
                        <div class="text-danger mt-1">{{ form.change_description.errors }}</div>
                        {% endif %}
                        <small class="form-text text-muted">–û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏</small>
                    </div>
                    
                    <div class="alert alert-info">
                        <strong>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong>
                        <ul class="mb-0 mt-2">
                            <li>–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è —Ñ–∞–π–ª–∞ –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–æ–≤–æ–π</li>
                            <li>–°—Ç–∞—Ä—ã–π —Ñ–∞–π–ª –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω —Å —Å–µ—Ä–≤–µ—Ä–∞</li>
                            <li>–ù–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ —É–≤–µ–ª–∏—á–∏—Ç—Å—è –Ω–∞ 1</li>
                            <li>–¢–µ–∫—Å—Ç –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ—á–µ–Ω –∏–∑ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞</li>
                        </ul>
                    </div>
                    
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-save"></i> –°–æ–∑–¥–∞—Ç—å –≤–µ—Ä—Å–∏—é
                        </button>
                        <a href="{% url 'file_manager:file_detail' file.id %}" class="btn btn-secondary">
                            <i class="bi bi-x-circle"></i> –û—Ç–º–µ–Ω–∞
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <i class="bi bi-file-earmark"></i> –¢–µ–∫—É—â–∏–π —Ñ–∞–π–ª
            </div>
            <div class="card-body">
                <h5 class="card-title">{{ file.title }}</h5>
                <p class="card-text">{{ file.description|truncatechars:100 }}</p>
                
                <dl class="row mb-0">
                    <dt class="col-sm-5">–¢–∏–ø —Ñ–∞–π–ª–∞:</dt>
                    <dd class="col-sm-7">{{ file.get_file_type_display }}</dd>
                    
                    <dt class="col-sm-5">–†–∞–∑–º–µ—Ä:</dt>
                    <dd class="col-sm-7">{{ file.get_file_size_display }}</dd>
                    
                    <dt class="col-sm-5">–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:</dt>
                    <dd class="col-sm-7">{{ file.version }}</dd>
                    
                    <dt class="col-sm-5">–ó–∞–≥—Ä—É–∂–µ–Ω:</dt>
                    <dd class="col-sm-7">{{ file.uploaded_at|date:"d.m.Y" }}</dd>
                </dl>
                
                <a href="{% url 'file_manager:file_detail' file.id %}" class="btn btn-outline-primary w-100 mt-3">
                    <i class="bi bi-eye"></i> –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}